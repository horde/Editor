CKEDITOR.dialog.add("specialchar",function(t){var s,r=t.lang.specialChar,q=function(c){var b=t.getSelection(),a=b.getRanges(true),f,e;t.fire("saveSnapshot");for(var d=a.length-1;d>=0;d--){f=a[d];f.deleteContents();e=CKEDITOR.dom.element.createFromHtml(c);f.insertNode(e)}if(f){f.moveToPosition(e,CKEDITOR.POSITION_AFTER_END);f.select()}t.fire("saveSnapshot")},p=function(c){var b,a;if(c.data){b=c.data.getTarget()}else{b=new CKEDITOR.dom.element(c)}if(b.getName()=="a"&&(a=b.getChild(0).getHtml())){b.removeClass("cke_light_background");s.hide();if(CKEDITOR.env.gecko){q(a)}else{t.insertHtml(a)}}},o=CKEDITOR.tools.addFunction(p),n,m=function(c,b){var a;b=b||c.data.getTarget();if(b.getName()=="span"){b=b.getParent()}if(b.getName()=="a"&&(a=b.getChild(0).getHtml())){if(n){l(null,n)}var d=s.getContentElement("info","htmlPreview").getElement();s.getContentElement("info","charPreview").getElement().setHtml(a);d.setHtml(CKEDITOR.tools.htmlEncode(a));b.getParent().addClass("cke_light_background");n=b}},l=function(b,a){a=a||b.data.getTarget();if(a.getName()=="span"){a=a.getParent()}if(a.getName()=="a"){s.getContentElement("info","charPreview").getElement().setHtml("&nbsp;");s.getContentElement("info","htmlPreview").getElement().setHtml("&nbsp;");a.getParent().removeClass("cke_light_background");n=undefined}},k=CKEDITOR.tools.addFunction(function(c){c=new CKEDITOR.dom.event(c);var b=c.getTarget(),a,f,e=c.getKeystroke(),d=t.lang.dir=="rtl";switch(e){case 38:if(a=b.getParent().getParent().getPrevious()){f=a.getChild([b.getParent().getIndex(),0]);f.focus();l(null,b);m(null,f)}c.preventDefault();break;case 40:if(a=b.getParent().getParent().getNext()){f=a.getChild([b.getParent().getIndex(),0]);if(f&&f.type==1){f.focus();l(null,b);m(null,f)}}c.preventDefault();break;case 32:p({data:c});c.preventDefault();break;case d?37:39:case 9:if(a=b.getParent().getNext()){f=a.getChild(0);if(f.type==1){f.focus();l(null,b);m(null,f);c.preventDefault(true)}else{l(null,b)}}else{if(a=b.getParent().getParent().getNext()){f=a.getChild([0,0]);if(f&&f.type==1){f.focus();l(null,b);m(null,f);c.preventDefault(true)}else{l(null,b)}}}break;case d?39:37:case CKEDITOR.SHIFT+9:if(a=b.getParent().getPrevious()){f=a.getChild(0);f.focus();l(null,b);m(null,f);c.preventDefault(true)}else{if(a=b.getParent().getParent().getPrevious()){f=a.getLast().getChild(0);f.focus();l(null,b);m(null,f);c.preventDefault(true)}else{l(null,b)}}break;default:return}});return{title:r.title,minWidth:430,minHeight:280,buttons:[CKEDITOR.dialog.cancelButton],charColumns:17,chars:["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&lt;","=","&gt;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;(EURO SIGN)","&lsquo;(LEFT SINGLE QUOTATION MARK)","&rsquo;(RIGHT SINGLE QUOTATION MARK)","&ldquo;(LEFT DOUBLE QUOTATION MARK)","&rdquo;(RIGHT DOUBLE QUOTATION MARK)","&ndash;(EN DASH)","&mdash;(EM DASH)","&iexcl;(INVERTED EXCLAMATION MARK)","&cent;(CENT SIGN)","&pound;(POUND SIGN)","&curren;(CURRENCY SIGN)","&yen;(YEN SIGN)","&brvbar;(BROKEN BAR)","&sect;(SECTION SIGN)","&uml;(DIAERESIS)","&copy;(COPYRIGHT SIGN)","&ordf;(FEMININE ORDINAL INDICATOR)","&laquo;(LEFT-POINTING DOUBLE ANGLE QUOTATION MARK)","&not;(NOT SIGN)","&reg;(REGISTERED SIGN)","&macr;(MACRON)","&deg;(DEGREE SIGN)","&plusmn;(PLUS-MINUS SIGN)","&sup2;(SUPERSCRIPT TWO)","&sup3;(SUPERSCRIPT THREE)","&acute;(ACUTE ACCENT)","&micro;(MICRO SIGN)","&para;(PILCROW SIGN)","&middot;(MIDDLE DOT)","&cedil;(CEDILLA)","&sup1;(SUPERSCRIPT ONE)","&ordm;(MASCULINE ORDINAL INDICATOR)","&raquo;(RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK)","&frac14;(VULGAR FRACTION ONE QUARTER)","&frac12;(VULGAR FRACTION ONE HALF)","&frac34;(VULGAR FRACTION THREE QUARTERS)","&iquest;(INVERTED QUESTION MARK)","&Agrave;(LATIN CAPITAL LETTER A WITH GRAVE)","&Aacute;(LATIN CAPITAL LETTER A WITH ACUTE)","&Acirc;(LATIN CAPITAL LETTER A WITH CIRCUMFLEX)","&Atilde;(LATIN CAPITAL LETTER A WITH TILDE)","&Auml;(LATIN CAPITAL LETTER A WITH DIAERESIS)","&Aring;(LATIN CAPITAL LETTER A WITH RING ABOVE)","&AElig;(LATIN CAPITAL LETTER AE)","&Ccedil;(LATIN CAPITAL LETTER C WITH CEDILLA)","&Egrave;(LATIN CAPITAL LETTER E WITH GRAVE)","&Eacute;(LATIN CAPITAL LETTER E WITH ACUTE)","&Ecirc;(LATIN CAPITAL LETTER E WITH CIRCUMFLEX)","&Euml;(LATIN CAPITAL LETTER E WITH DIAERESIS)","&Igrave;(LATIN CAPITAL LETTER I WITH GRAVE)","&Iacute;(LATIN CAPITAL LETTER I WITH ACUTE)","&Icirc;(LATIN CAPITAL LETTER I WITH CIRCUMFLEX)","&Iuml;(LATIN CAPITAL LETTER I WITH DIAERESIS)","&ETH;(LATIN CAPITAL LETTER ETH)","&Ntilde;(LATIN CAPITAL LETTER N WITH TILDE)","&Ograve;(LATIN CAPITAL LETTER O WITH GRAVE)","&Oacute;(LATIN CAPITAL LETTER O WITH ACUTE)","&Ocirc;(LATIN CAPITAL LETTER O WITH CIRCUMFLEX)","&Otilde;(LATIN CAPITAL LETTER O WITH TILDE)","&Ouml;(LATIN CAPITAL LETTER O WITH DIAERESIS)","&times;(MULTIPLICATION SIGN)","&Oslash;(LATIN CAPITAL LETTER O WITH STROKE)","&Ugrave;(LATIN CAPITAL LETTER U WITH GRAVE)","&Uacute;(LATIN CAPITAL LETTER U WITH ACUTE)","&Ucirc;(LATIN CAPITAL LETTER U WITH CIRCUMFLEX)","&Uuml;(LATIN CAPITAL LETTER U WITH DIAERESIS)","&Yacute;(LATIN CAPITAL LETTER Y WITH ACUTE)","&THORN;(LATIN CAPITAL LETTER THORN)","&szlig;(LATIN SMALL LETTER SHARP S)","&agrave;(LATIN SMALL LETTER A WITH GRAVE)","&aacute;(LATIN SMALL LETTER A WITH ACUTE)","&acirc;(LATIN SMALL LETTER A WITH CIRCUMFLEX)","&atilde;(LATIN SMALL LETTER A WITH TILDE)","&auml;(LATIN SMALL LETTER A WITH DIAERESIS)","&aring;(LATIN SMALL LETTER A WITH RING ABOVE)","&aelig;(LATIN SMALL LETTER AE)","&ccedil;(LATIN SMALL LETTER C WITH CEDILLA)","&egrave;(LATIN SMALL LETTER E WITH GRAVE)","&eacute;(LATIN SMALL LETTER E WITH ACUTE)","&ecirc;(LATIN SMALL LETTER E WITH CIRCUMFLEX)","&euml;(LATIN SMALL LETTER E WITH DIAERESIS)","&igrave;(LATIN SMALL LETTER I WITH GRAVE)","&iacute;(LATIN SMALL LETTER I WITH ACUTE)","&icirc;(LATIN SMALL LETTER I WITH CIRCUMFLEX)","&iuml;(LATIN SMALL LETTER I WITH DIAERESIS)","&eth;(LATIN SMALL LETTER ETH)","&ntilde;(LATIN SMALL LETTER N WITH TILDE)","&ograve;(LATIN SMALL LETTER O WITH GRAVE)","&oacute;(LATIN SMALL LETTER O WITH ACUTE)","&ocirc;(LATIN SMALL LETTER O WITH CIRCUMFLEX)","&otilde;(LATIN SMALL LETTER O WITH TILDE)","&ouml;(LATIN SMALL LETTER O WITH DIAERESIS)","&divide;(DIVISION SIGN)","&oslash;(LATIN SMALL LETTER O WITH STROKE)","&ugrave;(LATIN SMALL LETTER U WITH GRAVE)","&uacute;(LATIN SMALL LETTER U WITH ACUTE)","&ucirc;(LATIN SMALL LETTER U WITH CIRCUMFLEX)","&uuml;(LATIN SMALL LETTER U WITH DIAERESIS)","&uuml;(LATIN SMALL LETTER U WITH DIAERESIS)","&yacute;(LATIN SMALL LETTER Y WITH ACUTE)","&thorn;(LATIN SMALL LETTER THORN)","&yuml;(LATIN SMALL LETTER Y WITH DIAERESIS)","&OElig;(LATIN CAPITAL LIGATURE OE)","&oelig;(LATIN SMALL LIGATURE OE)","&#372;(LATIN CAPITAL LETTER W WITH CIRCUMFLEX)","&#374(LATIN CAPITAL LETTER Y WITH CIRCUMFLEX)","&#373(LATIN SMALL LETTER W WITH CIRCUMFLEX)","&#375;(LATIN SMALL LETTER Y WITH CIRCUMFLEX)","&sbquo;(SINGLE LOW-9 QUOTATION MARK)","&#8219;(SINGLE HIGH-REVERSED-9 QUOTATION MARK)","&bdquo;(DOUBLE LOW-9 QUOTATION MARK)","&hellip;(HORIZONTAL ELLIPSIS)","&trade;(TRADE MARK SIGN)","&#9658;(BLACK RIGHT-POINTING POINTER)","&bull;(BULLET)","&rarr;(RIGHTWARDS ARROW)","&rArr;(RIGHTWARDS DOUBLE ARROW)","&hArr;(LEFT RIGHT DOUBLE ARROW)","&diams;(BLACK DIAMOND SUIT)","&asymp;(ALMOST EQUAL TO)"],onLoad:function(){var h=this.definition.charColumns,g=this.definition.chars,f=CKEDITOR.tools.getNextId()+"_specialchar_table_label",e=['<table role="listbox" aria-labelledby="'+f+'" style="width: 320px; height: 100%; border-collapse: separate;" align="center" cellspacing="2" cellpadding="2" border="0">'],d=0,c=g.length,b,a;while(d<c){e.push("<tr>");for(var j=0;j<h;j++,d++){if(b=g[d]){a="";b=b.replace(/\((.*?)\)/,function(x,w){a=w;return""});a=a||b;var i="cke_specialchar_label_"+d+"_"+CKEDITOR.tools.getNextNumber();e.push('<td class="cke_dark_background" style="cursor: default" role="presentation"><a href="javascript: void(0);" role="option" aria-posinset="'+(d+1)+'"',' aria-setsize="'+c+'"',' aria-labelledby="'+i+'"',' style="cursor: inherit; display: block; height: 1.25em; margin-top: 0.25em; text-align: center;" title="',CKEDITOR.tools.htmlEncode(a),'" onkeydown="CKEDITOR.tools.callFunction( '+k+', event, this )" onclick="CKEDITOR.tools.callFunction('+o+', this); return false;" tabindex="-1"><span style="margin: 0 auto;cursor: inherit">'+b+'</span><span class="cke_voice_label" id="'+i+'">'+a+"</span></a>")}else{e.push('<td class="cke_dark_background">&nbsp;')}e.push("</td>")}e.push("</tr>")}e.push("</tbody></table>",'<span id="'+f+'" class="cke_voice_label">'+r.options+"</span>");this.getContentElement("info","charContainer").getElement().setHtml(e.join(""))},contents:[{id:"info",label:t.lang.common.generalTab,title:t.lang.common.generalTab,padding:0,align:"top",elements:[{type:"hbox",align:"top",widths:["320px","90px"],children:[{type:"html",id:"charContainer",html:"",onMouseover:m,onMouseout:l,focus:function(){var a=this.getElement().getElementsByTag("a").getItem(0);setTimeout(function(){a.focus();m(null,a)},0)},onShow:function(){var a=this.getElement().getChild([0,0,0,0,0]);setTimeout(function(){a.focus();m(null,a)},0)},onLoad:function(a){s=a.sender}},{type:"hbox",align:"top",widths:["100%"],children:[{type:"vbox",align:"top",children:[{type:"html",html:"<div></div>"},{type:"html",id:"charPreview",className:"cke_dark_background",style:"border:1px solid #eeeeee;font-size:28px;height:40px;width:70px;padding-top:9px;font-family:'Microsoft Sans Serif',Arial,Helvetica,Verdana;text-align:center;",html:"<div>&nbsp;</div>"},{type:"html",id:"htmlPreview",className:"cke_dark_background",style:"border:1px solid #eeeeee;font-size:14px;height:20px;width:70px;padding-top:2px;font-family:'Microsoft Sans Serif',Arial,Helvetica,Verdana;text-align:center;",html:"<div>&nbsp;</div>"}]}]}]}]}]}});