CKEDITOR.dialog.add("colordialog",function(X){var W=CKEDITOR.dom.element,V=CKEDITOR.document,U=CKEDITOR.tools,T=X.lang.colordialog,S,R={type:"html",html:"&nbsp;"};function Q(){V.getById(A).removeStyle("background-color");S.getContentElement("picker","selectedColor").setValue("")}function P(b){if(!(b instanceof CKEDITOR.dom.event)){b=new CKEDITOR.dom.event(b)}var a=b.getTarget(),c;if(a.getName()=="a"&&(c=a.getChild(0).getHtml())){S.getContentElement("picker","selectedColor").setValue(c)}}function O(b){if(!(b instanceof CKEDITOR.dom.event)){b=b.data}var a=b.getTarget(),c;if(a.getName()=="a"&&(c=a.getChild(0).getHtml())){V.getById(C).setStyle("background-color",c);V.getById(B).setHtml(c)}}function N(){V.getById(C).removeStyle("background-color");V.getById(B).setHtml("&nbsp;")}var M=U.addFunction(N),L=P,K=CKEDITOR.tools.addFunction(L),J=O,I=N,H=CKEDITOR.tools.addFunction(function(e){e=new CKEDITOR.dom.event(e);var a=e.getTarget(),f,d,c=e.getKeystroke(),b=X.lang.dir=="rtl";switch(c){case 38:if(f=a.getParent().getParent().getPrevious()){d=f.getChild([a.getParent().getIndex(),0]);d.focus();I(e,a);J(e,d)}e.preventDefault();break;case 40:if(f=a.getParent().getParent().getNext()){d=f.getChild([a.getParent().getIndex(),0]);if(d&&d.type==1){d.focus();I(e,a);J(e,d)}}e.preventDefault();break;case 32:L(e);e.preventDefault();break;case b?37:39:if(f=a.getParent().getNext()){d=f.getChild(0);if(d.type==1){d.focus();I(e,a);J(e,d);e.preventDefault(true)}else{I(null,a)}}else{if(f=a.getParent().getParent().getNext()){d=f.getChild([0,0]);if(d&&d.type==1){d.focus();I(e,a);J(e,d);e.preventDefault(true)}else{I(null,a)}}}break;case b?39:37:if(f=a.getParent().getPrevious()){d=f.getChild(0);d.focus();I(e,a);J(e,d);e.preventDefault(true)}else{if(f=a.getParent().getParent().getPrevious()){d=f.getLast().getChild(0);d.focus();I(e,a);J(e,d);e.preventDefault(true)}else{I(null,a)}}break;default:return}});function G(){var e=["00","33","66","99","cc","ff"];function a(l,k){for(var j=l;j<l+3;j++){var i=F.$.insertRow(-1);for(var h=k;h<k+3;h++){for(var g=0;g<6;g++){f(i,"#"+e[h]+e[g]+e[j])}}}}function f(j,i){var h=new W(j.insertCell(-1));h.setAttribute("class","ColorCell");h.setStyle("background-color",i);h.setStyle("width","15px");h.setStyle("height","15px");var g=h.$.cellIndex+1+18*j.rowIndex;h.append(CKEDITOR.dom.element.createFromHtml('<a href="javascript: void(0);" role="option" aria-posinset="'+g+'" aria-setsize="'+234+'" style="cursor: pointer;display:block;width:100%;height:100% " title="'+CKEDITOR.tools.htmlEncode(i)+'" onkeydown="CKEDITOR.tools.callFunction( '+H+', event, this )" onclick="CKEDITOR.tools.callFunction('+K+', event, this ); return false;" tabindex="-1"><span class="cke_voice_label">'+i+"</span>&nbsp;</a>",CKEDITOR.document))}a(0,0);a(3,0);a(0,3);a(3,3);var d=F.$.insertRow(-1);for(var c=0;c<6;c++){f(d,"#"+e[c]+e[c]+e[c])}for(var b=0;b<12;b++){f(d,"#000000")}}var F=new W("table");G();var E=F.getHtml(),D=function(a){return CKEDITOR.tools.getNextId()+"_"+a},C=D("hicolor"),B=D("hicolortext"),A=D("selhicolor"),z=D("color_table_label");return{title:T.title,minWidth:360,minHeight:220,onLoad:function(){S=this},contents:[{id:"picker",label:T.title,accessKey:"I",elements:[{type:"hbox",padding:0,widths:["70%","10%","30%"],children:[{type:"html",html:'<table role="listbox" aria-labelledby="'+z+'" onmouseout="CKEDITOR.tools.callFunction( '+M+' );">'+(!CKEDITOR.env.webkit?E:"")+'</table><span id="'+z+'" class="cke_voice_label">'+T.options+"</span>",onLoad:function(){var a=CKEDITOR.document.getById(this.domId);a.on("mouseover",O);CKEDITOR.env.webkit&&a.setHtml(E)},focus:function(){var a=this.getElement().getElementsByTag("a").getItem(0);a.focus()}},R,{type:"vbox",padding:0,widths:["70%","5%","25%"],children:[{type:"html",html:"<span>"+T.highlight+'</span>\t\t\t\t\t\t\t\t\t\t\t\t<div id="'+C+'" style="border: 1px solid; height: 74px; width: 74px;"></div>\t\t\t\t\t\t\t\t\t\t\t\t<div id="'+B+'">&nbsp;</div><span>'+T.selected+'</span>\t\t\t\t\t\t\t\t\t\t\t\t<div id="'+A+'" style="border: 1px solid; height: 20px; width: 74px;"></div>'},{type:"text",label:T.selected,labelStyle:"display:none",id:"selectedColor",style:"width: 74px",onChange:function(){try{V.getById(A).setStyle("background-color",this.getValue())}catch(a){Q()}}},R,{type:"button",id:"clear",style:"margin-top: 5px",label:T.clear,onClick:Q}]}]}]}]}});