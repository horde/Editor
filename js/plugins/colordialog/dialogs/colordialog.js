CKEDITOR.dialog.add("colordialog",function(T){var S=CKEDITOR.dom.element,R=CKEDITOR.document,Q=CKEDITOR.tools,P=T.lang.colordialog,O;function N(){return{type:"html",html:"&nbsp;"}}function M(){R.getById(x).removeStyle("background-color");O.getContentElement("picker","selectedColor").setValue("")}function L(a){if(!(a instanceof CKEDITOR.dom.event)){a=new CKEDITOR.dom.event(a)}var c=a.getTarget(),b;if(c.getName()=="a"&&(b=c.getChild(0).getHtml())){O.getContentElement("picker","selectedColor").setValue(b)}}function K(a){if(!(a instanceof CKEDITOR.dom.event)){a=a.data}var c=a.getTarget(),b;if(c.getName()=="a"&&(b=c.getChild(0).getHtml())){R.getById(z).setStyle("background-color",b);R.getById(y).setHtml(b)}}function J(){R.getById(z).removeStyle("background-color");R.getById(y).setHtml("&nbsp;")}var I=Q.addFunction(J),H=L,G=CKEDITOR.tools.addFunction(H),F=K,E=J,D=CKEDITOR.tools.addFunction(function(b){b=new CKEDITOR.dom.event(b);var f=b.getTarget(),d,a,e=b.getKeystroke(),c=T.lang.dir=="rtl";switch(e){case 38:if(d=f.getParent().getParent().getPrevious()){a=d.getChild([f.getParent().getIndex(),0]);a.focus();E(b,f);F(b,a)}b.preventDefault();break;case 40:if(d=f.getParent().getParent().getNext()){a=d.getChild([f.getParent().getIndex(),0]);if(a&&a.type==1){a.focus();E(b,f);F(b,a)}}b.preventDefault();break;case 32:H(b);b.preventDefault();break;case c?37:39:if(d=f.getParent().getNext()){a=d.getChild(0);if(a.type==1){a.focus();E(b,f);F(b,a);b.preventDefault(true)}else{E(null,f)}}else{if(d=f.getParent().getParent().getNext()){a=d.getChild([0,0]);if(a&&a.type==1){a.focus();E(b,f);F(b,a);b.preventDefault(true)}else{E(null,f)}}}break;case c?39:37:if(d=f.getParent().getPrevious()){a=d.getChild(0);a.focus();E(b,f);F(b,a);b.preventDefault(true)}else{if(d=f.getParent().getParent().getPrevious()){a=d.getLast().getChild(0);a.focus();E(b,f);F(b,a);b.preventDefault(true)}else{E(null,f)}}break;default:return}});function C(){var b=["00","33","66","99","cc","ff"];function f(l,k){for(var j=l;j<l+3;j++){var i=B.$.insertRow(-1);for(var h=k;h<k+3;h++){for(var g=0;g<6;g++){d(i,"#"+b[h]+b[g]+b[j])}}}}function d(j,i){var h=new S(j.insertCell(-1));h.setAttribute("class","ColorCell");h.setStyle("background-color",i);h.setStyle("width","15px");h.setStyle("height","15px");var g=h.$.cellIndex+1+18*j.rowIndex;h.append(CKEDITOR.dom.element.createFromHtml('<a href="javascript: void(0);" role="option" aria-posinset="'+g+'" aria-setsize="'+234+'" style="cursor: pointer;display:block;width:100%;height:100% " title="'+CKEDITOR.tools.htmlEncode(i)+'" onkeydown="CKEDITOR.tools.callFunction( '+D+', event, this )" onclick="CKEDITOR.tools.callFunction('+G+', event, this ); return false;" tabindex="-1"><span class="cke_voice_label">'+i+"</span>&nbsp;</a>",CKEDITOR.document))}f(0,0);f(3,0);f(0,3);f(3,3);var a=B.$.insertRow(-1);for(var e=0;e<6;e++){d(a,"#"+b[e]+b[e]+b[e])}for(var c=0;c<12;c++){d(a,"#000000")}}var B=new S("table");C();var A=function(a){return a+CKEDITOR.tools.getNextNumber()},z=A("hicolor"),y=A("hicolortext"),x=A("selhicolor");return{title:P.title,minWidth:360,minHeight:220,onLoad:function(){O=this},contents:[{id:"picker",label:P.title,accessKey:"I",elements:[{type:"hbox",padding:0,widths:["70%","10%","30%"],children:[{type:"html",html:'<table role="listbox" aria-labelledby="color_table_label" onmouseout="CKEDITOR.tools.callFunction( '+I+' );">'+B.getHtml()+'</table><span id="color_table_label" class="cke_voice_label">'+P.options+"</span>",onLoad:function(){var a=CKEDITOR.document.getById(this.domId);a.on("mouseover",K)},focus:function(){var a=this.getElement().getElementsByTag("a").getItem(0);a.focus()}},N(),{type:"vbox",padding:0,widths:["70%","5%","25%"],children:[{type:"html",html:"<span>"+P.highlight+'</span>\t\t\t\t\t\t\t\t\t\t\t\t<div id="'+z+'" style="border: 1px solid; height: 74px; width: 74px;"></div>\t\t\t\t\t\t\t\t\t\t\t\t<div id="'+y+'">&nbsp;</div><span>'+P.selected+'</span>\t\t\t\t\t\t\t\t\t\t\t\t<div id="'+x+'" style="border: 1px solid; height: 20px; width: 74px;"></div>'},{type:"text",label:P.selected,labelStyle:"display:none",id:"selectedColor",style:"width: 74px",onChange:function(){try{R.getById(x).setStyle("background-color",this.getValue())}catch(a){M()}}},N(),{type:"button",id:"clear",style:"margin-top: 5px",label:P.clear,onClick:M}]}]}]}]}});